#cloud-config tins-x11-ubuntu-kde extends tins-x11
packages:
  - kubuntu-desktop
  - lightdm
  - lightdm-gtk-greeter
runcmd:
  - echo "/usr/sbin/lightdm" > /etc/X11/default-display-manager
  - DEBIAN_FRONTEND=noninteractive DEBCONF_NONINTERACTIVE_SEEN=true dpkg-reconfigure lightdm
  - echo set shared/default-x-display-manager lightdm | debconf-communicate
write_files:
  - content: |
      [Seat:*]
      autologin-user=$USER
      autologin-user-timeout=0
      type=xremote
      xserver-display-number=0
      greeter-session=lightdm-gtk-greeter
    path: /etc/lightdm/lightdm.conf.d/10-tins-x11.conf
